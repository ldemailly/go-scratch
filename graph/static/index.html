<!DOCTYPE html>
<html>
<body>
    Iteration: <span id="iterationCounter" style="margin-right: 20px;">0</span>
    <button id="toggleButton">Pause</button>
    <br />
    <svg id="canvas" width="200" height="200"></svg>

    <script>
        let iteration = 0;
        let isPolling = true;
        let interval;

        function updateIterationDisplay() {
            document.getElementById('iterationCounter').textContent = iteration;
        }

        function loadSVG() {
            fetch('/svg?i=' + iteration)
                .then(response => response.text())
                .then(data => {
                    document.getElementById('canvas').innerHTML = data;
                });
            iteration++;
            updateIterationDisplay();
        }

        function startPolling() {
            loadSVG();
            interval = setInterval(loadSVG, 1000);
        }

        function stopPolling() {
            clearInterval(interval);
        }

        document.getElementById('toggleButton').addEventListener('click', function() {
            if (isPolling) {
                stopPolling();
                this.textContent = 'Resume';
            } else {
                startPolling();
                this.textContent = 'Pause';
            }
            isPolling = !isPolling;
        });

        // Start initial polling
        startPolling();
    </script>
</body>
</html>
